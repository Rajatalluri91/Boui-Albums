
    <!DOCTYPE html>

<html dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet"/>
<script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
<title>MP3 Player</title>
<link href="style.css" media="all" rel="stylesheet"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Anek+Telugu&amp;display=swap" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/> <link href="https://fonts.googleapis.com/css2?family=Anek+Telugu:wght@421&amp;family=Mallanna&amp;family=Mandali&amp;display=swap" rel="stylesheet"/>

<link rel="manifest" href="manifest.json">

</head>
<style>
      
  body{
  
  align-items: center;
  justify-content: center;
  
  background-image: linear-gradient(to bottom left, #041f31, black);
  user-select: none; /* supported by Chrome and Opera */
   -webkit-user-select: none; /* Safari */
   -khtml-user-select: none; /* Konqueror HTML */
   -moz-user-select: none; /* Firefox */
   -ms-user-select: none; /* Internet Explorer/Edge */
   height: 100%; /* Ensure enough content for scrolling */
   
   background-size: 100% 100%;
   
   
}



#myProgress {
  width: 90%;
   background-color: #d9d9f2; 
  cursor: pointer;
  border-radius: 10px;
}



#myBar {
  width: 0%;
  height: 5px;
  background-color: #ffc266;
  border-radius: 10px;
}

.logo {
  fill: red;
}

.btn-action{
  cursor: pointer;
  padding-top:0;
  width: 70px;
  
  }

.btn-ctn, .infos-ctn{
  display: flex;
  align-items:center;
  justify-content:center;
  -webkit-tap-highlight-color:transparent;
  margin-top:0;
  
}
.infos-ctn{
padding-top:10px;
font-family: 'Anek Telugu', sans-serif;
}

.btn-ctn > div {
 padding-top: 10px;
 padding-left: 10px;
 padding-right: 0px;
 left: 0;
 margin-top:5px;
 margin-bottom:0px;
 
}

.infos-ctn > div {
 margin-bottom: 8px;
 color: white;
}

.first-btn{
  margin-left: 3px;
  
}

.duration{
  margin-left: 10px;
}

.title{
  margin-left: 10px;
  width: 180px;
  text-align: center;
  justify-content: center;
  
}





.player-ctn{
  
  width:100%;
  
  color:#ffc266;
  margin-bottom:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  position:fixed;
  bottom:0px;
 
  left: 0;
 height: 100px;
 background-image: linear-gradient(to bottom left, #041f31, black);
 
}






.playlist-track-ctn {
  display: flex;
  background: rgba(0, 0, 0, 0.3);
  margin-top: 5px;         /* ‚¨ÖÔ∏è Reduced gap between items */
  border-radius: 5px;
  cursor: pointer;
  align-items: center;
  justify-content: space-between;
  padding: 10px 10px;        /* ‚¨ÖÔ∏è Reduced vertical spacing inside item */
  column-gap: 10px;
 
}


   
.playlist-track-ctn:last-child{
  /*border: 1px solid #ffc266; */
  
}


.playlist-info-track{
  width: 80%;
}


.playlist-info-track,.playlist-duration{
  padding-top: 8px;
  padding-bottom:0px;
  color: white;
  font-size:18px;
  pointer-events: none;
  margin-right:10px;
}


.active-track{
  background:black;
  color: white !important;
  font-weight:bold;
  -webkit-tap-highlight-color:#141727cf;
  
}


.active-track > .playlist-info-track,.active-track >.playlist-duration,.active-track > .playlist-btn-play{
  color: #ffc266 !important;
}


.playlist-btn-play{
  pointer-events: none;
  padding-top: 8px;
  padding-bottom:0;
  padding-right:10px;
}
.fas{
  color:#ffc266;
  font-size: 16px;
  padding-top: 0px;

  
  
}  
.playlist-ctn{
	font-size:15px;
	color:#ffc266;
	font-family: 'Anek Telugu', sans-serif;
	margin-bottom:100px;
	margin-top: 10px;
	height:100%;
	

   }   
  
     .zoom-out {
  width: 75%;
  height: 200px; /* fixed height instead of aspect-ratio */
  background-image: url('https://i.pinimg.com/736x/26/59/e0/2659e076ff35e273ac472ce2a06082a4.jpg');
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  border-radius: 25px;
  margin: auto;
  
}

    .zoom-out.scroll {
      transform: scale(0.5);
      opacity: 0.1;
    }
	
	.playlist-track-ctn i.fa-scroll {
  color: #ffc266;
  padding-top: 10px;
}

.lyrics-box {
        display: none;
        background: rgba(0, 0, 0, 0.5);
        padding: 10px;
        border-radius: 8px;
        white-space: pre-line;
        font-family: 'Mandali', sans-serif;
        font-size: 20px;
        margin: 5px 10px 10px 2px;
        color:#ffc266;
        width:88%;
        padding-left:30px;
      }

input#searchBox {
        width: 90%;
        padding: 10px;
        border-radius: 8px;
        margin: 0 auto;
        display: block;
        font-family: 'Mandali', sans-serif;
        font-size:16px;
        position : fixed ;
        color: white ;
         background-image: linear-gradient(to bottom left, #041f31, black);
      }
      
    
#searchMask {
  position: fixed;
  top: 0;
  width: 100%;
  height: 60px; /* adjust based on searchBox height */
  background: linear-gradient(to bottom, rgba(4, 31, 49, 1), rgba(4, 31, 49, 0.8));
  z-index: 1;
}

input#searchBox {
  position: fixed;
  top: 10px;
  z-index: 2; /* Make sure input stays on top */
}
.custom-download-icon {
  color: #ffc266 !important;
  font-size: 16px;
}


  </style>
<body>
<div id="searchMask"></div>
<i class="fas fa-download custom-download-icon"></i>
<input id="searchBox" placeholder="‡∞™‡∞æ‡∞ü ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞∂‡±ã‡∞ß‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø..." type="text"/>
<br/><br/><br/><br/>
<div class="zoom-out"></div>
<script>
    window.addEventListener('scroll', function() {
      var scrollPosition = window.scrollY;
      var zoomOutElement = document.querySelector('.zoom-out');

      if (scrollPosition > 150) { // Adjust the scroll position where the effect starts
        zoomOutElement.classList.add('scroll');
      } else {
        zoomOutElement.classList.remove('scroll');
      }
    });
  </script>
<audio id="myAudio" ontimeupdate="onTimeUpdate()">
<!-- <source src="audio.ogg" type="audio/ogg"> -->
<source id="source-audio" src="" type="audio/mpeg"/>
  Your browser does not support the audio element.
</audio>
<div class="playlist-ctn"></div>
<div class="player-ctn">
<div class="infos-ctn">
<div class="timer">00:00</div>
<div class="title"></div>
<div class="duration">00:00</div>
<div class="Artist"></div>
</div>
<div id="myProgress">
<div id="myBar"></div>
</div>
<div class="btn-ctn">
<div class="btn-action first-btn" onclick="previous()">
<div id="btn-faws-back">
<i class="fas fa-step-backward"></i>
</div>
</div>
<div class="btn-action" onclick="toggleAudio()">
<div id="btn-faws-play-pause">
<i class="fas fa-play" id="icon-play"></i>
<i class="fas fa-pause" id="icon-pause" style="display: none"></i>
</div>
</div>
<div class="btn-action" onclick="next()">
<div id="btn-faws-next">
<i class="fas fa-step-forward"></i>
</div>
</div>
<div class="btn-mute" id="toggleMute" onclick="toggleMute()">
<div id="btn-faws-volume">
<i class="fas fa-volume-up" id="icon-vol-up"></i>
<i class="fas fa-volume-mute" id="icon-vol-mute" style="display: none"></i>
</div>
</div>
</div>
</div>
<script>
 document.getElementById('searchBox').addEventListener('input', function(e) {
  const term = e.target.value.toLowerCase();
  document.querySelectorAll('.playlist-track-ctn').forEach((track, index) => {
    const title = listAudio[index].name.toLowerCase();
    track.style.display = title.includes(term) ? 'flex' : 'none';
  });
}); 

function createTrackItem(index, name, duration) {
  const trackItem = document.createElement('div');
  trackItem.className = 'playlist-track-ctn';
  trackItem.id = 'ptc-' + index;
  trackItem.dataset.index = index;

  // ‚ñ∂Ô∏è Play Button
  const playBtn = document.createElement('div');
  playBtn.className = 'playlist-btn-play';
  playBtn.innerHTML = `<i class="fas fa-play" id="p-img-${index}"></i>`;

  // üéµ Song Info
  const info = document.createElement('div');
  info.className = 'playlist-info-track';
  info.textContent = name;

  // ‚è± Duration
  const dur = document.createElement('div');
  dur.className = 'playlist-duration';
  dur.textContent = duration;

  // üìñ Lyrics Icon
  const lyricsIcon = document.createElement('div');
  lyricsIcon.innerHTML = `<i class="fas fa-book-open"></i>`;
  lyricsIcon.style.cursor = 'pointer';
  lyricsIcon.onclick = function () {
  const lBox = document.getElementById('lyrics-' + index);
  const isVisible = lBox.style.display === 'block';

  // ‡∞Æ‡±ä‡∞¶‡∞ü ‡∞Ö‡∞®‡±ç‡∞®‡∞ø lyrics-box‡∞≤‡±ç‡∞®‡∞ø hide ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
  document.querySelectorAll('.lyrics-box').forEach(box => {
    box.style.display = 'none';
  });

  // ‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞Æ‡∞æ‡∞§‡±ç‡∞∞‡∞Æ‡±á toggle ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
  lBox.style.display = isVisible ? 'none' : 'block';
};


  // ‚¨áÔ∏è Download Icon
  const downloadIcon = document.createElement('div');
  downloadIcon.style.cursor = 'pointer';
  downloadIcon.innerHTML = `
  <a href="${listAudio[index].file}" download title="Download Song">
    <i class="fas fa-download" style="color: #ffc266; font-size: 16px;"></i>
  </a>
`;


  // ‚úÖ Add all to track
  trackItem.appendChild(playBtn);
  trackItem.appendChild(info);
  trackItem.appendChild(dur);
  trackItem.appendChild(lyricsIcon);
  trackItem.appendChild(downloadIcon);

  // üßæ Lyrics Box
  const lyricsDiv = document.createElement('div');
  lyricsDiv.className = 'lyrics-box';
  lyricsDiv.id = 'lyrics-' + index;
  lyricsDiv.style.display = 'none';

  const lyricsText = document.createElement('div');
  lyricsText.textContent = 'Lyrics loading...';
  lyricsDiv.appendChild(lyricsText);

  // üìú Add track and lyrics to playlist
  document.querySelector('.playlist-ctn').appendChild(trackItem);
  document.querySelector('.playlist-ctn').appendChild(lyricsDiv);

  // üé§ Load lyrics
  if (listAudio[index].lyricsUrl) {
    fetch(listAudio[index].lyricsUrl)
      .then(res => res.text())
      .then(text => {
        lyricsText.textContent = text;
      })
      .catch(err => {
        lyricsText.textContent = "Lyrics unavailable.";
      });
  } else {
    lyricsText.textContent = listAudio[index].lyrics || "Lyrics unavailable...";
  }
}




  

var listAudio = [
   
   {
      name:"‡∞ú‡±ã‡∞∏‡±ç‡∞Ø‡∞Ç ‡∞Æ‡∞æ‡∞ü‡±á¬†",
     file:"https://music.wixstatic.com/preview/f4beae_ef1d4744503543d4990ace69ccfb5857-128.mp3",
      duration:"04:55",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/f98d5cd808dbbe4c4fcb2daaebfbcc9e/raw/0eb147e36ee7b775e4831442e56b7061b06c2fa3/13.Josyam.txt "
      
    },
    {
      name:"‡∞Æ‡∞®‡∞ø‡∞∑‡∞ø‡∞ï‡∞ø ‡∞ú‡∞®‡±ç‡∞Æ ‡∞™‡∞æ‡∞™‡∞Æ‡±Å‡∞®‡±ç‡∞®‡∞¶‡∞æ",
     file:"https://music.wixstatic.com/preview/f4beae_74bd2f3386a14979802bb7ceb8dcaa50-128.mp3",
      duration:"05:06",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/59d8602e3c99536170169507832154b4/raw/d478ecd604f2371f2e65bea4c424b503bd4f4f98/20.Manishiki%2520Janma.txt "
      
    },
    {
      name:"‡∞è‡∞¶‡±á‡∞®‡±Å ‡∞§‡±ã‡∞ü‡∞≤‡±ã¬†",
      file:"https://music.wixstatic.com/preview/f4beae_57f6a3e9a1fc45ec8dc92c20d63e1a1b-128.mp3",
      duration:"07:02",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/c5e30d2aad92b5c9fb813c7d77da67ce/raw/1e77b96a744cdd4daa0bfb9e76be4542b23fa4e9/27.Edenu.txt "
    },
    {
      name:"‡∞®‡∞æ‡∞Æ‡∞ï‡∞æ‡∞∞‡±ç‡∞ß ‡∞¨‡±ã‡∞ß‡∞ï‡±Å‡∞°‡∞æ¬†¬†",
      file:"https://music.wixstatic.com/preview/f4beae_988aad3d1de1488f8f00634f11f57fe2-128.mp3",
      duration:"04:13",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/c5e30d2aad92b5c9fb813c7d77da67ce/raw/1e77b96a744cdd4daa0bfb9e76be4542b23fa4e9/31.Namakardha.txt "
    },
	{
      name:"‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞ø ‡∞é‡∞ï‡±ç‡∞ï‡∞°?¬†¬†",
      file:"https://music.wixstatic.com/preview/f4beae_7cdd010ff43544d9b22036245cb4f70b-128.mp3",
      duration:"05:44",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/af06607547ed36cda4c276a964b89730/raw/62a9abb4af969b765407098caf3c5630a49dbff7/36.Gnani%2520Ekkada.txt "
    },
    {
      name:"‡∞ï‡∞≤‡∞ø‡∞∏‡∞ø‡∞ï‡∞ü‡±ç‡∞ü‡±Å‡∞ó‡±Å‡∞Ç‡∞°‡∞æ‡∞≤‡∞ø¬†",
      file:"https://music.wixstatic.com/preview/f4beae_14fc60c2b98d4fec9a7420d71b836bba-128.mp3",
      duration:"05:41",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/55158de13ceaa34c491a9d8855299642/raw/444d989ade3af926077234ecdd70ecad5e142c8a/44.Kalisikattu.txt "
    },
    
   {
      name:" ‡∞ï‡±ç‡∞∞‡±Ä‡∞∏‡±ç‡∞§‡±Å‡∞®‡∞ø ‡∞ß‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø‡∞®‡∞¶‡∞ø¬†¬†¬†",
     file:"https://music.wixstatic.com/preview/f4beae_f04d8ece118149beabe01331932bb6f6-128.mp3",
      duration:"05:45",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/55158de13ceaa34c491a9d8855299642/raw/444d989ade3af926077234ecdd70ecad5e142c8a/46.%2520kreesthuni%2520Dharinchina.txt "
      
    },
    
   {
      name:" ‡∞ï‡±Ç‡∞°‡±Å ‡∞ó‡±Ç‡∞°‡±Å ‡∞ï‡±ã‡∞∏‡∞Ç¬†¬† ",
     file:"https://music.wixstatic.com/preview/f4beae_fc39bbb02147472db738a81d94023014-128.mp3",
      duration:"04:32",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/eae73a666a19503952c47b429711236b/raw/6569383b5afbbc5f7f7470c76a97034317db2dda/52.Kudu%2520Gudu.txt "
      
    },
	 {
      name:" ‡∞à ‡∞≠‡±Ç‡∞Æ‡∞ø‡∞™‡±à ‡∞¨‡±ç‡∞∞‡∞§‡±Å‡∞ï‡±Å¬†¬†",
     file:"https://music.wixstatic.com/preview/f4beae_58420eacf03a488995d390e7a6edbb87-128.mp3",
      duration:"05:37",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/aee65eb4b68b0958f520786359568a99/raw/4d479c61d440563644dd215a3d61d1703798f562/57.Ee%2520Bhumipai.txt "
      
    },
    {
      name:" ‡∞®‡±Ä‡∞µ‡±Ü‡∞µ‡∞∞‡±à‡∞®‡∞æ ‡∞ó‡∞æ‡∞®‡∞ø¬†",
     file:"https://music.wixstatic.com/preview/f4beae_d6ca25ca59f24dc68fbdd73daa25205b-128.mp3",
      duration:"05:34",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/e3fb9ec7a0f6dc7aafd954915a094f64/raw/7319886ba4cd55cb947ce2efb37350b51ac17ca9/63.Neevevaraina.txt "
      
    },
    {
      name:" ‡∞®‡±Ä ‡∞¶‡±á‡∞π‡∞Æ‡±á ‡∞Ü ‡∞™‡±ç‡∞∞‡∞≠‡±Å‡∞®‡∞ø‡∞¶‡∞ø¬†¬†¬†",
     file:"https://music.wixstatic.com/preview/f4beae_7a69460fd8ea42c69cfce4f0f59b327f-128.mp3",
      duration:"04:04",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/2a3f338af203a4fe6473e10331b76dfc/raw/0d19ebea41a6b37bb31503338a5f59e28dc39f21/69.Nee%2520Dehame.txt "
      
    },
    {
      name:" ‡∞¨‡±à‡∞¨‡∞ø‡∞≤‡±ç ‡∞®‡±á ‡∞§‡∞™‡±ç‡∞™‡∞Ç‡∞ü‡±á¬† ",
     file:"https://music.wixstatic.com/preview/f4beae_fcb06b4654f74d37b1e8905650804e16-128.mp3",
      duration:"04:00",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/4c75417c1965e46f6404331556bed5e9/raw/3e057814460e3be4403ece72a30f3412ebf96a21/75.Bible%2520ne.txt "
      
    },
    {
      name:" ‡∞Æ‡±Ä‡∞≤‡±ã ‡∞í‡∞ï‡∞°‡±Å ‡∞∏‡∞æ‡∞§‡∞æ‡∞®‡∞®‡∞ø¬†¬†¬†",
     file:"https://music.wixstatic.com/preview/f4beae_08c650cf9c154b20ab24543c55fbb394-128.mp3",
      duration:"05:33",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/27564bb5b4ba6e909fecf5b8a846dc66/raw/ec4fd23a040570cbdccc19725ddf0b8788c3c245/87.%2520Meelo%2520Okadu.txt "
      
    },
    {
      name:"‡∞≠‡±Ç‡∞Æ‡∞ø‡∞®‡∞ø ‡∞§‡∞≤‡∞ï‡±ç‡∞∞‡∞ø‡∞Ç‡∞¶‡±Å‡∞≤‡±Å¬†",
     file:"https://music.wixstatic.com/preview/f4beae_b5da5a6cfd2c42fa98d5e83a9b359fe3-128.mp3",
      duration:"04:33",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/e82005d74d9635019926ee8c77b9e42f/raw/94f2792bf70098ca797dd749d4f11560e4e5b873/99.Bhumini.txt "
      
    }
    ,
    {
      name:"‡∞ï‡±ç‡∞∞‡±à‡∞∏‡±ç‡∞§‡∞µ‡±ç‡∞Ø‡∞æ‡∞®‡±ç‡∞®‡±Ü‡∞µ‡∞∞‡±Ç¬†¬†",
     file:"https://music.wixstatic.com/preview/f4beae_d332226f758d45eab68a036bb22f9232-128.mp3",
      duration:"04:41",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/0b75565daed6a521b2ed778c7d9daf61/raw/4ac21114f1108d6076d99f7ba9507d52c815e5f6/127.Kraisthvyanni.txt "
      
    }
    
    ,
    {
      name:"‡∞Ø‡±Ü‡∞π‡±ã‡∞µ‡∞æ‡∞ï‡±Å ‡∞®‡±Å‡∞µ‡±Å ‡∞∏‡∞æ‡∞ï‡±ç‡∞∑‡∞ø‡∞µ‡∞æ?¬†",
     file:"https://music.wixstatic.com/preview/f4beae_212c15068e78439e9c1e1fb66cee476b-128.mp3",
      duration:"04:32",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/80f216a0f348ba575d7d8a05bba928c6/raw/41e2c9177f08c2ae9828b7e7f8145daf1812b360/140.Yehovaku.txt "
      
    }
     ,
    {
      name:"‡∞Æ‡∞®‡∞ø‡∞∑‡∞ø ‡∞ú‡∞®‡±ç‡∞Æ ‡∞í‡∞ï‡∞∏‡∞æ‡∞∞‡±á¬†¬†",
     file:"https://music.wixstatic.com/preview/f4beae_1ada4b52d8aa437a89cde3b1fcb40a30-128.mp3",
      duration:"06:11",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/bd747ef70991c9bd47e55e4305bb9a5e/raw/17edc4dcf44e22d8966871bfde31dfa290272d13/168.Manishi%2520janma%2520Okasare.txt "
      
    }
     ,
    {
      name:"‡∞ó‡±ä‡∞Ç‡∞§‡∞ø‡∞ö‡±ç‡∞ö‡∞æ‡∞°‡∞®‡∞ø¬†",
     file:"https://music.wixstatic.com/preview/f4beae_cd24b10610594b10b0e8fffdba33da49-128.mp3",
      duration:"05:43",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/9d5060797f29d31ed36eb94044ab7b59/raw/bd2675b3db4dbfef014941215a59e1f1ca4c7431/172.Gonthicchadani.txt "
      
    },
    {
      name:"‡∞¶‡±á‡∞µ‡±Å‡∞®‡∞ø ‡∞ï‡∞æ‡∞≤ ‡∞∞‡∞π‡∞∏‡±ç‡∞Ø‡∞Ç",
     file:"https://music.wixstatic.com/preview/f4beae_429a2af1ab9d4479ac8a8a791b1dfef6-128.mp3",
      duration:"01:48",
      lyricsUrl: "https://gist.githubusercontent.com/Rajatalluri91/94a6959bf6a0699e90cb169b65553d08/raw/ad8ad541271ab99ef784d1610ea7d5bcc8cad2dd/177.%2520Devuni%2520kala%2520rahasyam.txt" 
      
    }
    ]
    


  for (var i = 0; i < listAudio.length; i++) {
      createTrackItem(i,listAudio[i].name,listAudio[i].duration);
  }
  var indexAudio = 0;

  function loadNewTrack(index){
    var player = document.querySelector('#source-audio')
    player.src = listAudio[index].file
    document.querySelector('.title').innerHTML = listAudio[index].name
    this.currentAudio = document.getElementById("myAudio");
    this.currentAudio.load()
    this.toggleAudio()
    this.updateStylePlaylist(this.indexAudio,index)
    this.indexAudio = index;
  }

  var playListItems = document.querySelectorAll(".playlist-track-ctn");

  for (let i = 0; i < playListItems.length; i++){
    playListItems[i].addEventListener("click", getClickedElement.bind(this));
  }

  function getClickedElement(event) {
    for (let i = 0; i < playListItems.length; i++){
      if(playListItems[i] == event.target){
        var clickedIndex = event.target.getAttribute("data-index")
        if (clickedIndex == this.indexAudio ) { // alert('Same audio');
            this.toggleAudio()
        }else{
            loadNewTrack(clickedIndex);
        }
      }
    }
  }

  document.querySelector('#source-audio').src = listAudio[indexAudio].file
  document.querySelector('.title').innerHTML = listAudio[indexAudio].name


  var currentAudio = document.getElementById("myAudio");

  currentAudio.load()
  
  currentAudio.onloadedmetadata = function() {
        document.getElementsByClassName('duration')[0].innerHTML = this.getMinutes(this.currentAudio.duration)
  }.bind(this);

  var interval1;

  function toggleAudio() {

    if (this.currentAudio.paused) {
      document.querySelector('#icon-play').style.display = 'none';
      document.querySelector('#icon-pause').style.display = 'block';
      document.querySelector('#ptc-'+this.indexAudio).classList.add("active-track");
      this.playToPause(this.indexAudio)
      this.currentAudio.play();
    }else{
      document.querySelector('#icon-play').style.display = 'block';
      document.querySelector('#icon-pause').style.display = 'none';
      this.pauseToPlay(this.indexAudio)
      this.currentAudio.pause();
    }
  }

  function pauseAudio() {
    this.currentAudio.pause();
    clearInterval(interval1);
  }

  var timer = document.getElementsByClassName('timer')[0]

  var barProgress = document.getElementById("myBar");


  var width = 0;

  function onTimeUpdate() {
    var t = this.currentAudio.currentTime
    timer.innerHTML = this.getMinutes(t);
    this.setBarProgress();
    if (this.currentAudio.ended) {
      document.querySelector('#icon-play').style.display = 'block';
      document.querySelector('#icon-pause').style.display = 'none';
      this.pauseToPlay(this.indexAudio)
      if (this.indexAudio < listAudio.length-1) {
          var index = parseInt(this.indexAudio)+1
          this.loadNewTrack(index)
      }
    }
  }


  function setBarProgress(){
    var progress = (this.currentAudio.currentTime/this.currentAudio.duration)*100;
    document.getElementById("myBar").style.width = progress + "%";
  }


  function getMinutes(t){
    var min = parseInt(parseInt(t)/60);
    var sec = parseInt(t%60);
    if (sec < 10) {
      sec = "0"+sec
    }
    if (min < 10) {
      min = "0"+min
    }
    return min+":"+sec
  }

  var progressbar = document.querySelector('#myProgress')
  progressbar.addEventListener("click", seek.bind(this));


  function seek(event) {
    var percent = event.offsetX / progressbar.offsetWidth;
    this.currentAudio.currentTime = percent * this.currentAudio.duration;
    barProgress.style.width = percent*100 + "%";
  }

  function forward(){
    this.currentAudio.currentTime = this.currentAudio.currentTime + 5
    this.setBarProgress();
  }

  function rewind(){
    this.currentAudio.currentTime = this.currentAudio.currentTime - 5
    this.setBarProgress();
  }


  function next(){
    if (this.indexAudio <listAudio.length-1) {
        var oldIndex = this.indexAudio
        this.indexAudio++;
        updateStylePlaylist(oldIndex,this.indexAudio)
        this.loadNewTrack(this.indexAudio);
    }
  }

  function previous(){
    if (this.indexAudio>0) {
        var oldIndex = this.indexAudio
        this.indexAudio--;
        updateStylePlaylist(oldIndex,this.indexAudio)
        this.loadNewTrack(this.indexAudio);
    }
  }

  function updateStylePlaylist(oldIndex,newIndex){
    document.querySelector('#ptc-'+oldIndex).classList.remove("active-track");
    this.pauseToPlay(oldIndex);
    document.querySelector('#ptc-'+newIndex).classList.add("active-track");
    this.playToPause(newIndex)
  }

  function playToPause(index){
    var ele = document.querySelector('#p-img-'+index)
    ele.classList.remove("fa-play");
    ele.classList.add("fa-pause");
  }

  function pauseToPlay(index){
    var ele = document.querySelector('#p-img-'+index)
    ele.classList.remove("fa-pause");
    ele.classList.add("fa-play");
  }


  function toggleMute(){
    var btnMute = document.querySelector('#toggleMute');
    var volUp = document.querySelector('#icon-vol-up');
    var volMute = document.querySelector('#icon-vol-mute');
    if (this.currentAudio.muted == false) {
       this.currentAudio.muted = true
       volUp.style.display = "none"
       volMute.style.display = "block"
    }else{
      this.currentAudio.muted = false
      volMute.style.display = "none"
      volUp.style.display = "block"
    }
  }
  
  

</script>
<script src="app.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
      .then(function() { console.log('SW registered'); });
  }
</script>

<script>
function cacheThisSong(songUrl, lyricsUrl) {
  if (!('caches' in window)) {
    alert("‚ùå Caching not supported in this browser.");
    return;
  }
  caches.open('boui-v1').then(cache => {
    cache.add(songUrl).then(() => {
      if (lyricsUrl) {
        cache.add(lyricsUrl).then(() => {
          alert("‚úî Cached song & lyrics for offline use!");
        }).catch(() => alert("‚ö†Ô∏è Song cached, but lyrics failed."));
      } else {
        alert("‚úî Cached song for offline use!");
      }
    }).catch(() => {
      alert("‚ùå Failed to cache song.");
    });
  });
}
</script>


</body>
</html>
